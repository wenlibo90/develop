<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>商城</title>
    <meta name="viewport" content="width=750px">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="http://static.yuntongauto.com/test/shop/css/pay.css">
</head>
<body bgcolor="#f5f5f5">
<div class="myTop myTop1 noBg">
    <a href="javascript:void(0)" class="back lBox">
        <img src="img/back.png" class="l ">
    </a>
    确认订单
</div>
<div class="payBox">

    <div class="payCont">
        <span class="close">&times;</span>
        <div class="top">
            <img src="http://static.yuntongauto.com/web/badminton/img/branch-10.png" class="l">
            <div class="l">
                <p class="t1">名字</p>
                <p class="t2">售价：<span class="price">2000</span>元</p>
                <p class="num">
                    <span class="reduce"  onclick="pay.m.reduceFn()"></span>
                    <input type="number" class="getNum" value="1">
                    <span class="plus" onclick="pay.m.plusFn()"></span>
                </p>
            </div>
        </div>
        <div class="cont">
            <span>购买须知</span>
            <p>这是一些说明性的内容</p>
        </div>
    </div>
    <div class="toBuy">
        <div class="l">
            <span class="money">14444</span>元
        </div>
        <div class="r sureBuy" onclick="pay.v.toPath()">
            确认支付
        </div>
    </div>
</div>
<div class="tips">
    <div class="tipsBox">
        <img src="img/tips.png" alt="">
        <p></p>
    </div>
    <img src="img/closeBtn.png" alt="" class="closeBtn" onclick="pay.v.closeTips()">
</div>
</body>
<script src="http://static.yuntongauto.com/js/jquery.min.js"></script>
<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>
let pay={
    m:{
        plusFn:function () {
            let obj=$('.getNum');
            let num=obj.val();
            let m=$('.top .t2 .price').html();
            ++num;
            if((num)*(m)>10000){
                pay.v.tipsFn('单笔订单金额不能超过<span style="color: #FF6A20 ;">10000</span>元')
                return null
            }else{
                obj.val(num)
                pay.v.moneyFn(num*m)
            }
        },
        reduceFn:function () {
            let obj=$('.getNum');
            let num=obj.val();
            --num;
            if(num<=0){
                pay.v.tipsFn('购买数量至少为<span style="color: #FF6A20 ;">1</span>个')
                return null
            }else{
                obj.val(num);
                pay.v.moneyFn(num*$('.top .t2 .price').html())
            }
        }
    },
    v:{
        moneyFn:function (num) {
            $('.money').html(num)
        },
        tipsFn:function (msg) {
            if(msg){
                $('.tips').show().find('p').html(msg)
            }else{
                $('.tips').show().find('p').html('未知错误，请联系管理员')
            }
        },
        closeTips:function () {
            $('.tips').hide()
        },
        toPath:function () {
            window.location.href='payEnd.html?goods=1&pay=1'
        }
    },
    c:{
        init:function () {
            if(base.GTUrlParam().orderid){
            //    根据订单id
            }else{

            }
        }
    }
}
</script>
</html>