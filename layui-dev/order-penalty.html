<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="plugins/layui/css/layui.css" media="all" />
		<link rel="stylesheet" href="plugins/font-awesome/css/font-awesome.min.css">
	</head>

	<body class="layui-field-box">
          <div class="layui-field-box layui-form">
              <div class="layui-input-inline" style="width:220px"><input id="text" placeholder="订单编号/姓名/电话号/车辆编号" class="layui-input" type="text"></div>
              <div class="layui-input-inline">
                  <select class="layui-input" id="status">
                  	 <option value="-1">全部</option>
                      <option value="3">买家违约-需支付违约金</option>
                      <option value="6">卖家赔付</option>
                  </select>
              </div>
              <div class="layui-btn" id="search"><i class="fa fa-search"></i>查询</div>
          </div>
          <div class="layui-field-box">
              <table class="layui-table">
                  <thead>
                      <tr>
                          <th>订单编号</th>
                          <th>买家姓名</th>
                          <th>买家电话</th>
                          <th>车辆编号</th>
                          <th>车辆名称</th>
                          <th>竞拍类型</th>
                          <th>争议审核结果</th>
                          <th>应付违约金</th>
                          <th>操作</th>
                      </tr>
                  </thead>
                  <tbody id="list">
                       <tr>
                          <td colspan="9" style="text-align:center;height:200px">暂无信息！</td>
                       </tr>
                       
                  </tbody>
              </table>
          </div>

	</body>
    
      <script type="text/javascript" src="plugins/layui/layui.all.js"></script>
	<script type="text/javascript" src="js/common/common_sup.js"></script>
	<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
	<script>
		var uri_list='/boss/order/selectBreachPayOrderList';
		var page=1;
		var limit=10;
    layui.use('table', function(){
        var table = layui.table;
    });
    $(function(){
    	init_tab();
    	$("#search").on('click',function(){
    		var searchName = $("#text").val().trim()==""?null: $("#text").val().trim();
    		var breachStatus = $("#status").val()=="-1"?null:$("#status").val();
    		init_tab(searchName,breachStatus);
    	});
    })
    function init_tab(searchName,breachStatus){//初始化表单数据
    	var data_list ={
    		
    		"searchName":searchName
    		,"page":page
    		,"limit":limit
    		,"breachStatus":breachStatus
    	}
    	var result_list  = sup_ajax(uri_list,data_list,false);
    	if(result_list==null||result_list==""){
    		return;
    	}
    	if(result_list.resultCode!=100){
    		layer.msg(result_list.resultMsg);
    		return;
    	}
    	var html="";
    	var name=["orderNo","userName","mobile","carAutoNo","autoInfoName","auctionType","breachStatusValue","breakFee"];
    	for(var i=0;i<result_list.data.list.length;i++){
    		html+='<tr>';
    		for(var j=0;j<name.length;j++){
    			html+='<td>';
    			var tmp = eval('result_list.data.list[i].'+name[j]);
    			if(tmp!=null){
    				switch (name[j]){
    					case 'breakFee':
    					tmp+='元';
    						break;
    					
    					case 'auctionType':
    					if(tmp=='1'||tmp==1){
    						tmp="线上";
    					}
    					else if(tmp=='2'||tmp==2){
    						tmp="线下";
    					}
    						break;
    					case 'orderNo':
    					tmp='<a target="_blank" href=\'order-detail.html?orderId='+result_list.data.list[i].id+'\'>'+tmp+'</a>';
    					
    					break;
    				}
    				html+=tmp;
    			}
    			
    			html+='</td>';
    		}
    		html+='<td><a href="javascript:;" onclick="upCase(\''+result_list.data.list[i].id+'\',\''+result_list.data.list[i].breachId+'\',\''+result_list.data.list[i].breakFee+'\')" class="layui-btn layui-btn-warm layui-btn-sm">支付确认</a></td>';  
    		html+='</tr>';
    	}
    	$("#list").html(html);
    }
    function upCase(orderId,breachId,money){
    	var str = 'order-detail.html?orderId='+orderId+'&'+'breachId='+breachId+'&'+'money='+money+'';
    	
    	layer.full(layer.open({
				title: '会员详细信息',
				type: 2,
				shade: 0, //不显示遮罩
				content: str
			}));

    }
    </script>

</html>