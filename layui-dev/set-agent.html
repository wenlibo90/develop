<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" href="plugins/layui/css/layui.css" media="all" />
<link rel="stylesheet" href="plugins/font-awesome/css/font-awesome.min.css">
</head>

<body>

<div class="layui-field-box">
    <div class="layui-tab-content" style="height:560px">
        <div class="layui-tab-item layui-show">
            <!--<div class="layui-field-box">
                <div class="layui-input-inline" style="width:220px"><input placeholder="代办公司名称" class="layui-input" type="text"></div>
                <div class="layui-btn"><i class="fa fa-search"></i>查询</div>
                <div class="layui-btn add-tips"><i class="layui-icon">&#xe608;</i>&nbsp;新增</div>
            </div>-->
            <div class="layui-field-box layui-form">
                <table class="layui-table">
                    <thead>
                        <tr>
                            <th>代办公司编号</th>
                            <th>代办公司名称</th>
                            <th>代办公司地址</th>
                            <th>负责人姓名</th>
                            <th>联系电话</th>
                            <th>代办范围</th>
                            <th>是否启用</th>
                            <th>创建时间</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="agent_list">
                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="plugins/layui/layui.all.js"></script>
<script type="text/javascript" src="js/common/common_sup.js"></script>
<script>
layui.use(['element','table'], function(){
	
	var $ = layui.jquery ,element = layui.element,laypage = layui.laypage;
	
	$(function(){
		//初始化
		agent_set();
		
		//删除
		$(".del").on('click', function(){
				var url = "/boss/agentCompany/deleteAgentCompany";
				var data = {
					id:$(this).attr("data")
				};
				parent.layer.confirm('是否删除？',{shade:0}, function(index){
					parent.layer.close(index);
					var result = sup_ajax(url, data, false);
					layer.msg(result.resultMsg);
					//重新加载
					agent_set();
				});
		})
		
		//修改提示
		$(".change-tips").on('click', function(){
				layer.msg("如有修改请联系管理员");
		})
		
		//新增提示
		$(".add-tips").on('click', function(){
				layer.msg("不能新增");
		})

	})
	 
	 //代办设置
	function agent_set() {
		var url = "/boss/agentCompany/selectAgentCompanyList";
		var data = {
			
		};
		var data = sup_ajax(url, data, false);
		var list = data.data.list;
		if(data.data.count==0){
			$('#agent_list').html('<tr><td colspan="9" style="text-align:center;height:200px">返回数据为空，没有代办公司！</td></tr>');
			return;
		}
		$('#agent_list').html('');
		$.each(list,function(i,r){
		  var ison_mark;
		  if(r.status==1){
				 ison_mark='是';
		  }else{
			  ison_mark='否';
		  }
		  $('#agent_list').append('<tr>' +
			  '<td>'+r.companyCode+'</td> ' +
			  '<td>'+r.companyName+'</td> ' +
			  '<td>'+r.address+'</td> ' +
			  '<td>'+r.handlerName+'</td> ' +
			  '<td>'+r.handlerTel+'</td> ' +
			  '<td>代办范围</td> ' +
			  '<td><a href="javascript:;" class="layui-btn layui-btn-primary layui-btn-xs">'+ison_mark+'</a></td> ' +
			  '<td>'+timeFormat(r.createTime)+'</td> ' +
			  //'<td><a href="javascript:;" class="layui-btn layui-btn-xs">修改</a><a href="javascript:;" class="layui-btn layui-btn-danger layui-btn-xs del" data="'+r.id+'" type="agent">删除</a></td></tr>')
			  '<td><a href="javascript:;" class="layui-btn layui-btn-xs change-tips">修改</a></td></tr>')
		})
	 }
	 
});
</script>

</body>
</html>